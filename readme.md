–í–æ—Ç –ø—Ä–∏–º–µ—Ä README.md –¥–ª—è —Ç–≤–æ–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –º–∞—Ä—à—Ä—É—Ç–∞–º–∏:

‚∏ª

###TODO
- add postgis db
- add GET /heat_map -> all gps point for heat map


# IP Info Server

–ü—Ä–æ—Å—Ç–æ–π REST API-—Å–µ—Ä–≤–µ—Ä –Ω–∞ Go, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:

- –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω
- –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –ø–æ –ª–æ–≥–∏–Ω—É –∏ –ø–∞—Ä–æ–ª—é –∏ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω
- –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–≤–æ—ë–º IP
- –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ª—é–±–æ–º IP
- –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∑–∞–ø—Ä–æ—Å–æ–≤

## üì¶ –ó–∞–ø—É—Å–∫

```bash
go run cmd/ipinfo_server/main.go

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–µ—Ä–≤–µ—Ä —Å—Ç–∞—Ä—Ç—É–µ—Ç –Ω–∞ http://localhost:8080.

üóÇÔ∏è –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

{{domain}} = http://localhost:8080
{{auth_token}} = —Ç–æ–∫–µ–Ω, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ –∏–ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

‚∏ª

üîê POST /register

–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º –ª–æ–≥–∏–Ω–æ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞.

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:

POST {{domain}}/register?username=username&password=password



‚∏ª

üîë GET /login

–í—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Ö–æ–¥ –∏ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:

GET {{domain}}/login?username=username&password=password

–û—Ç–≤–µ—Ç:

{
  "token": "abc123..."
}



‚∏ª

üåê GET /self_ip

–ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–≤–æ—ë–º IP-–∞–¥—Ä–µ—Å–µ (–ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É –∑–∞–ø—Ä–æ—Å–∞).

–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è.

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:

GET {{domain}}/self_ip
Authorization: Bearer {{auth_token}}



‚∏ª

üåç GET /ext_ip/{ip}

–ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–Ω–µ—à–Ω–µ–º IP-–∞–¥—Ä–µ—Å–µ.

–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è.

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:

GET {{domain}}/ext_ip/3.3.3.3
Authorization: Bearer {{auth_token}}



‚∏ª

üïò GET /history

–ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é IP-–∑–∞–ø—Ä–æ—Å–æ–≤ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è.

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:

GET {{domain}}/history
Authorization: Bearer {{auth_token}}



‚∏ª

üõ† –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
	‚Ä¢	Go >= 1.20
	‚Ä¢	SQLite
	‚Ä¢	chi

‚∏ª

üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

ip_info_server/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ ipinfo_server/
‚îÇ       ‚îî‚îÄ‚îÄ main.go         # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ db/                 # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î –∏ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–∞
‚îÇ   ‚îú‚îÄ‚îÄ handlers/           # HTTP-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ middleware/         # Middleware –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ ipinfo.db               # SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö



‚∏ª

üß™ –ü—Ä–∏–º–µ—Ä—ã Postman / curl

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
curl -X POST "http://localhost:8080/register?username=user&password=12345"

# –õ–æ–≥–∏–Ω
curl "http://localhost:8080/login?username=user&password=12345"

# Self IP
curl -H "Authorization: Bearer {{auth_token}}" http://localhost:8080/self_ip

# External IP
curl -H "Authorization: Bearer {{auth_token}}" http://localhost:8080/ext_ip/8.8.8.8

# History
curl -H "Authorization: Bearer {{auth_token}}" http://localhost:8080/history



‚∏ª

üìå –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ

–¢–æ–∫–µ–Ω —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ. –ü–æ–≤—Ç–æ—Ä–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞—Å—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –Ω–æ–≤—ã–º —Ç–æ–∫–µ–Ω–æ–º.

